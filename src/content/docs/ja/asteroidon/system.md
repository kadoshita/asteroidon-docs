---
title: "あすてろいどんを支える技術"
description: "マストドンサーバー「あすてろいどん」の技術解説"
---

## インフラ構成

あすてろいどんは、鯖管の自宅に置かれているサーバー(通称「自宅サーバー」)の上で動いています。

各種ソフトウェアの実行基盤としてKubernetesを利用しており、3台の仮想マシンの上にKubernetesクラスターを構築しています。
![system](/system.png)

Kubernetesを利用することで、比較的高い安定性とスケーラビリティを実現しています。

一方で、物理的なサーバーは1台なので、物理サーバーのソフトウェアアップデートなどを行う際は、一定時間アクセスできない時間が発生します。

また、インターネット回線は一般的なフレッツ光なので、回線の障害が発生した場合にも、アクセスできなくなる可能性があります。
幸い、いまのところサービスの提供に影響があるような回線障害は発生していません。

電源も家庭用の電源なので、災害などで停電が発生した場合はサービスの提供ができなくなります。
ただ、無停電電源装置(UPS)を設置しているため、停電後数分程度はサーバーを動かし続けることができます。
そのため、落雷などによる短時間の停電にはある程度耐えられます。
また、長時間の停電の場合でも、停電後に安全にマシンをシャットダウンさせる時間が作れるため、データ破損のリスクは抑えることができます。

あすてろいどんのインフラ構成については、以下のブログ記事にも書いていますので、もしよかったら読んでみてください。

[Mastodonの実行基盤をDocker ComposeからKubernetesに移行した話 #FediverseAdventCalendar - await wakeUp();](https://sublimer.hatenablog.com/entry/2022/12/21/083020)